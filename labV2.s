		AREA LAB1, CODE, READONLY
		ARM
AD_RAM	EQU	0XE0001000
RAM	RN	R11	
	ENTRY	; #### MAIN ########
			LDR RAM,=AD_RAM
			LDR	R0, =0X00000002		;OP1
			LDR R1,	=0X00000003		;OP2
			LDR R2,	=0X00000007		;COD. OP

			CMP R2, #0X00000001		;COMPARACION
			BEQ SUMA				;SI ES IGUAL SALTA A LA ETIQUETA SUMA
			B 32					;SALTA A LA INSTRUCCION EN LA DIR 32 OMITIENDO LA LINEA SIG.
SUMA		BL SUMAR				;LLAMA LA FUNCION SUMAR

			CMP R2, #0X00000002		
			BEQ RESTA 
			B 48
RESTA		BL RESTAR	

			CMP R2, #0X00000003		
			BEQ DIVI
			B 64
DIVI		BL DIVISION
	
			CMP R2, #0X00000004		
			BEQ MULTI
			B 80
MULTI		BL MULTIPLICAR

			CMP R2, #0X00000005		
			BEQ POTEN
			B 104
POTEN		LDR R5,	=0X00000001		;CONTADOR
			MOV R6,R0
			BL POTENCIACION
						
			CMP R2, #0X00000006		
			BEQ RAD
			B 124
RAD			LDR R1, =0X0
			BL RADICACION

			CMP R2, #0X00000007		
			BEQ FACTO
			B 184
EXCEPT		BL MOVER
			B 184
FACTO		
			CMP R0,#0X0
			BEQ EXCEPT
			CMP R0,#0X1
			BEQ EXCEPT
			CMP R0,#0X2
			BEQ	EXCEPT
			LDR	R1,	=0X00000001
			SUB R4, R0, R1
			CMP R4, R1
			BNE CALL
			B	HERE
CALL		BL FACTORIAL
		
			MOV R4,R3				;RESULTADO DE LA OPERACION (RETURN)
			STR R4, [RAM]			;GUARDAR EN LA MEMORIA
HERE		B	HERE



;################################# FUNCIONES #################################
SUMAR
			ADD R3, R0 ,R1
			BX LR			;NOS DEVUELVE A UNA INSTRUCCION ADELANTE DEL BL CON EL QUE SE HIZO LLAMADO A ESTA FUNCIÓN(RETORNAR) 
			
RESTAR	
			SUB R3, R0, R1
			BX LR
			
DIVISION
			LDR R3,	=0X0	;CONTADOR
			CMP R1,#0X0
			BNE CICLO
CICLO
			CMP R0,R1
			BLO RETURN3
			SUB	R0, R0, R1
			ADD R3, R3, #0X1
			B 	CICLO
RETURN3		BX LR
				
MULTIPLICAR
			MUL	R3, R0,R1
			BX LR

		
POTENCIACION
			CMP R5,R1
			BEQ RETURN
			MUL R3,R6,R0
			MOV R6,R3
			ADD R5,R5,#0X00000001
			B POTENCIACION
RETURN		
			BX LR 


RADICACION
			MOV R3, R1
			MUL R5, R1, R1
			ADD R1, #0X1
			CMP R0, R5
			BEQ	RETURN4
			CMP R1, R0
			BGT	EXCEPT
			B RADICACION
RETURN4		BX LR
	

FACTORIAL
			MUL	R3, R0,R4
			MOV R0,R3
			SUB R4, R4, R1
			CMP R4, #0X1
			BNE FACTORIAL
			BX LR

MOVER		MOV R3,R0
			BX LR
	END